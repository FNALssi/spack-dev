#!/usr/bin/env python

import sys
import os

# Currently we require Python 2.6.
if sys.version_info[:2] < (2, 6):
    v_info = sys.version_info[:3]
    sys.exit("SpackDev requires version 2.6 or higher."
             "This is Python %d.%d.%d." % v_info)

# Make sure we see all the same things Spack sees:
if 'SPACK_ROOT' not in os.environ:
    sys.exit("SpackDev requires that Spack has been set up first.")

SPACK_LIB_PATH\
    = os.path.join(os.environ['SPACK_ROOT'], 'lib', 'spack')
sys.path.insert(0, SPACK_LIB_PATH)
sys.path.insert(0, os.path.join(SPACK_LIB_PATH, 'external'))

# Now make sure we can find our own code.
SPACKDEV_FILE = os.path.realpath(os.path.expanduser(__file__))
os.environ["SPACKDEV_FILE"] = SPACKDEV_FILE
SPACKDEV_PREFIX = os.path.dirname(os.path.dirname(SPACKDEV_FILE))

SPACKDEV_LIB_PATH = os.path.join(SPACKDEV_PREFIX, "lib", "spackdev")
sys.path.insert(0, SPACKDEV_LIB_PATH)

import spackdev
spackdev.main(sys.argv)

